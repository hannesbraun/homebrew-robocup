--- a/spark/lib/kerosin/kerosin-config.in.mlibfix	2010-06-08 13:09:00.000000000 +0430
+++ b/spark/lib/kerosin/kerosin-config.in	2010-08-04 04:29:02.566306185 +0430
@@ -14,6 +14,7 @@ Options:
  [--libs]
  [--libtool]
  [--cflags]
+ [-m32|-m64]
 EOF
   exit $1
 }
@@ -22,6 +23,16 @@ if test $# -eq 0 ; then
   usage 1 1>&2
 fi

+ARCH=`arch`
+case $ARCH in
+  x86_64 | ia64 | s390x)
+    LIBDIR="/usr/lib64"
+    ;;
+  * )
+    LIBDIR="/usr/lib"
+    ;;
+esac
+
 while test $# -gt 0 ; do
   case "$1" in
   -*=*) optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
@@ -57,6 +68,12 @@ while test $# -gt 0 ; do
   --libtool)
     echo_libtool=yes
     ;;
+  -m32)
+    LIBDIR="/usr/lib"
+    ;;
+  -m64)
+    LIBDIR="/usr/lib64"
+    ;;
   *)
     usage 1 1>&2
     ;;
@@ -93,7 +110,7 @@ if test "$echo_libs" = "yes" ; then
  else
   libs="-lkerosin"
  fi
- echo -L@libdir@/simspark $libs
+ echo -L$LIBDIR/simspark $libs
 fi

 if test "$echo_libtool" = "yes" ; then
@@ -105,7 +122,7 @@ if test "$echo_libtool" = "yes" ; then
  if test `uname` = "Darwin"; then
    convlib="$convlib -framework OpenGL -framework IL -framework SDL "
  fi
- echo @libdir@/simspark/$convlib
+ echo $LIBDIR/simspark/$convlib
 fi

 # EOF
--- a/spark/lib/oxygen/oxygen-config.in.mlibfix	2010-06-08 13:08:59.000000000 +0430
+++ b/spark/lib/oxygen/oxygen-config.in	2010-08-04 04:29:09.525209055 +0430
@@ -14,6 +14,7 @@ Options:
  [--libs]
  [--libtool]
  [--cflags]
+ [-m32|-m64]
 EOF
   exit $1
 }
@@ -22,6 +23,16 @@ if test $# -eq 0 ; then
   usage 1 1>&2
 fi

+ARCH=`arch`
+case $ARCH in
+  x86_64 | ia64 | s390x)
+    LIBDIR="/usr/lib64"
+    ;;
+  * )
+    LIBDIR="/usr/lib"
+    ;;
+esac
+
 while test $# -gt 0 ; do
   case "$1" in
   -*=*) optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
@@ -57,6 +68,12 @@ while test $# -gt 0 ; do
   --libtool)
     echo_libtool=yes
     ;;
+  -m32)
+    LIBDIR="/usr/lib"
+    ;;
+  -m64)
+    LIBDIR="/usr/lib64"
+    ;;
   *)
     usage 1 1>&2
     ;;
@@ -93,7 +110,7 @@ if test "$echo_libs" = "yes" ; then
  else
   libs="-loxygen"
  fi
- echo -L@libdir@/simspark $libs
+ echo -L$LIBDIR/simspark $libs
 fi

 if test "$echo_libtool" = "yes" ; then
@@ -102,7 +119,7 @@ if test "$echo_libtool" = "yes" ; then
  else
   convlib="liboxygen.la"
  fi
- echo @libdir@/simspark/$convlib
+ echo $LIBDIR/simspark/$convlib
 fi

 # EOF
--- a/spark/lib/salt/salt-config.in.mlibfix	2010-06-08 13:09:00.000000000 +0430
+++ b/spark/lib/salt/salt-config.in	2010-08-04 04:22:13.525157510 +0430
@@ -15,6 +15,7 @@ Options:
  [--libs]
  [--libtool]
  [--cflags]
+ [-m32|-m64]
 EOF
   exit $1
 }
@@ -23,6 +24,16 @@ if test $# -eq 0 ; then
   usage 1 1>&2
 fi

+ARCH=`arch`
+case $ARCH in
+  x86_64 | ia64 | s390x)
+    LIBDIR="/usr/lib64"
+    ;;
+  * )
+    LIBDIR="/usr/lib"
+    ;;
+esac
+
 while test $# -gt 0 ; do
   case "$1" in
   -*=*) optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
@@ -61,6 +72,12 @@ while test $# -gt 0 ; do
   --libdir)
     echo_libdir=yes
     ;;
+  -m32)
+    LIBDIR="/usr/lib"
+    ;;
+  -m64)
+    LIBDIR="/usr/lib64"
+    ;;
   *)
     usage 1 1>&2
     ;;
@@ -97,7 +114,7 @@ if test "$echo_libs" = "yes" ; then
  else
   libs="-lsalt @SALT_LIBADD@"
  fi
- echo -L@libdir@/simspark $libs
+ echo -L$LIBDIR/simspark $libs
 fi

 if test "$echo_libtool" = "yes" ; then
@@ -106,11 +123,11 @@ if test "$echo_libtool" = "yes" ; then
  else
   convlib="libsalt.la"
  fi
- echo @libdir@/simspark/$convlib
+ echo $LIBDIR/simspark/$convlib
 fi

 if test "$echo_libdir" = "yes" ; then
- echo @libdir@/simspark
+ echo $LIBDIR/simspark
 fi

 # EOF
--- a/spark/lib/zeitgeist/zeitgeist-config.in.mlibfix	2010-06-08 13:09:00.000000000 +0430
+++ b/spark/lib/zeitgeist/zeitgeist-config.in	2010-08-04 04:28:56.398341469 +0430
@@ -14,6 +14,7 @@ Options:
  [--libs]
  [--libtool]
  [--cflags]
+ [-m32|-m64]
 EOF
   exit $1
 }
@@ -22,6 +23,16 @@ if test $# -eq 0 ; then
   usage 1 1>&2
 fi

+ARCH=`arch`
+case $ARCH in
+  x86_64 | ia64 | s390x)
+    LIBDIR="/usr/lib64"
+    ;;
+  * )
+    LIBDIR="/usr/lib"
+    ;;
+esac
+
 while test $# -gt 0 ; do
   case "$1" in
   -*=*) optarg=`echo "$1" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
@@ -57,6 +68,12 @@ while test $# -gt 0 ; do
   --libtool)
     echo_libtool=yes
     ;;
+  -m32)
+    LIBDIR="/usr/lib"
+    ;;
+  -m64)
+    LIBDIR="/usr/lib64"
+    ;;
   *)
     usage 1 1>&2
     ;;
@@ -93,7 +110,7 @@ if test "$echo_libs" = "yes" ; then
  else
   libs="-lzeitgeist"
  fi
- echo -L@libdir@/simspark $libs
+ echo -L$LIBDIR/simspark $libs
 fi

 if test "$echo_libtool" = "yes" ; then
@@ -105,7 +122,7 @@ if test "$echo_libtool" = "yes" ; then
  if test `uname -s` = "Darwin"; then
    convlib="$convlib -framework Carbon"
  fi
- echo @libdir@/simspark/$convlib
+ echo $LIBDIR/simspark/$convlib
 fi

 # EOF
